(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-oa-reimbursement-reimbursement"],{"09fe":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".uni-popup[data-v-33b3e770]{position:fixed;\ntop:var(--window-top);\n\n\nbottom:0;left:0;right:0;overflow:hidden}.uni-popup__mask[data-v-33b3e770]{position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,.4);opacity:0}.mask-ani[data-v-33b3e770]{-webkit-transition-property:opacity;transition-property:opacity;-webkit-transition-duration:.2s;transition-duration:.2s}.uni-top-mask[data-v-33b3e770]{opacity:1}.uni-bottom-mask[data-v-33b3e770]{opacity:1}.uni-center-mask[data-v-33b3e770]{opacity:1}.uni-popup__wrapper[data-v-33b3e770]{\ndisplay:block;\nposition:absolute}.top[data-v-33b3e770]{top:0;left:0;right:0;-webkit-transform:translateY(-500px);transform:translateY(-500px)}.bottom[data-v-33b3e770]{bottom:0;left:0;right:0;-webkit-transform:translateY(500px);transform:translateY(500px)}.center[data-v-33b3e770]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\nbottom:0;left:0;right:0;top:0;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0}.uni-popup__wrapper-box[data-v-33b3e770]{\ndisplay:block;\nposition:relative}.content-ani[data-v-33b3e770]{\n\t\t/* transition: transform 0.3s;\n */-webkit-transition-property:opacity,-webkit-transform;transition-property:opacity,-webkit-transform;transition-property:transform,opacity;transition-property:transform,opacity,-webkit-transform;-webkit-transition-duration:.2s;transition-duration:.2s}.uni-top-content[data-v-33b3e770]{-webkit-transform:translateY(0);transform:translateY(0)}.uni-bottom-content[data-v-33b3e770]{-webkit-transform:translateY(0);transform:translateY(0)}.uni-center-content[data-v-33b3e770]{-webkit-transform:scale(1);transform:scale(1);opacity:1}",""]),t.exports=e},"137a":function(t,e,i){"use strict";var a={uniIcons:i("1581").default,uniPopup:i("d441").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-common-mt"},[i("v-uni-form",["1"==t.edit?i("v-uni-input",{staticClass:"hidden",model:{value:t.formData.id,callback:function(e){t.$set(t.formData,"id",e)},expression:"formData.id"}}):t._e(),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("申请人")]),"0"==t.edit?i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"申请人"},model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName",e)},expression:"user.userName"}}):t._e(),"1"==t.edit?i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"申请人"},model:{value:t.formData.userName,callback:function(e){t.$set(t.formData,"userName",e)},expression:"formData.userName"}}):t._e()],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("申请公司")]),i("v-uni-input",{staticClass:"hidden",attrs:{name:"companyId"},model:{value:t.formData.companyId,callback:function(e){t.$set(t.formData,"companyId",e)},expression:"formData.companyId"}}),i("v-uni-input",{staticClass:"hidden",attrs:{name:"deptId"},model:{value:t.formData.deptId,callback:function(e){t.$set(t.formData,"deptId",e)},expression:"formData.deptId"}}),i("v-uni-picker",{staticClass:"picker",attrs:{mode:"multiSelector",value:t.multiIndex,range:t.multiArray},on:{columnchange:function(e){arguments[0]=e=t.$handleEvent(e),t.bindMultiPickerColumnChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.multiArray[0][t.multiIndex[0]])+"，"+t._s(t.multiArray[1][t.multiIndex[1]])+"，"+t._s(t.multiArray[2][t.multiIndex[2]]))])],1)],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("项目")]),i("v-uni-input",{staticClass:"hidden",model:{value:t.formData.projectId,callback:function(e){t.$set(t.formData,"projectId",e)},expression:"formData.projectId"}}),i("v-uni-input",{staticClass:"uni-input",attrs:{name:"title",placeholder:"项目"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.togglePopup("center","borrow")}},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[i("span",{staticClass:"red"},[t._v("*")]),t._v("报销金额")]),i("v-uni-input",{staticClass:"uni-input",attrs:{name:"money",type:"number",placeholder:"报销金额"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.Upcase()}},model:{value:t.formData.money,callback:function(e){t.$set(t.formData,"money",e)},expression:"formData.money"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[i("span",{staticClass:"red"},[t._v("*")]),t._v("金额大写")]),i("v-uni-input",{staticClass:"uni-input",attrs:{name:"moneyUpcase",placeholder:"金额大写"},model:{value:t.formData.moneyUpcase,callback:function(e){t.$set(t.formData,"moneyUpcase",e)},expression:"formData.moneyUpcase"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("报销人")]),i("v-uni-input",{staticClass:"uni-input",attrs:{name:"receiver",placeholder:"报销人"},model:{value:t.formData.receiver,callback:function(e){t.$set(t.formData,"receiver",e)},expression:"formData.receiver"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("收款账号")]),i("v-uni-input",{staticClass:"uni-input",attrs:{name:"receiverAccount",placeholder:"收款账号"},model:{value:t.formData.receiverAccount,callback:function(e){t.$set(t.formData,"receiverAccount",e)},expression:"formData.receiverAccount"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("收款开户行")]),i("v-uni-input",{staticClass:"uni-input",attrs:{name:"receiverOpenBank",placeholder:"收款开户行"},model:{value:t.formData.receiverOpenBank,callback:function(e){t.$set(t.formData,"receiverOpenBank",e)},expression:"formData.receiverOpenBank"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("实际报销金额")]),i("v-uni-input",{staticClass:"uni-input",attrs:{name:"actualMoney",disabled:"true",placeholder:"实际报销金额"},model:{value:t.formData.actualMoney,callback:function(e){t.$set(t.formData,"actualMoney",e)},expression:"formData.actualMoney"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("金额大写")]),i("v-uni-input",{staticClass:"uni-input",attrs:{name:"actualMoneyUpcase",disabled:"true",placeholder:"金额大写"},model:{value:t.formData.actualMoneyUpcase,callback:function(e){t.$set(t.formData,"actualMoneyUpcase",e)},expression:"formData.actualMoneyUpcase"}})],1),i("v-uni-view",[i("v-uni-view",{staticClass:" list-pd filebox"},[i("v-uni-view",{staticClass:" cell-pd"},[i("v-uni-view",{staticClass:"uni-uploader"},[i("v-uni-view",{staticClass:"uni-uploader-head"},[i("v-uni-view",{staticClass:"uni-uploader-title"},[i("v-uni-text",{staticClass:"filetitlee"},[t._v("附件:")]),t._v("(点击可预览选好的图片)")],1),i("v-uni-view",{staticClass:"uni-uploader-info"},[t._v(t._s(t.imageList.length)+"/9")])],1),i("v-uni-view",{staticClass:"uni-uploader-body"},[i("v-uni-view",{staticClass:"uni-uploader__files"},[t._l(t.imageList,(function(e,a){return[i("v-uni-view",{key:a+"_0",staticClass:"uni-uploader__file uni-uploader_close"},[i("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e,"data-src":e},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"closeBtn",nativeOn:{tap:function(e){return e.stopPropagation(),t.deleImage(a)}}},[i("v-uni-text",{staticClass:"closeB"}),t._v("X")],1)],1)]})),i("v-uni-view",{staticClass:"uni-uploader__input-box"},[i("v-uni-view",{staticClass:"uni-uploader__input",nativeOn:{tap:function(e){return e.stopPropagation(),t.chooseImage("0")}}})],1)],2)],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"borrow"},[i("v-uni-button",{staticClass:"mini-btn borrowbtn",attrs:{type:"info"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.togglePopup("center","detail")}}},[t._v("报销明细")]),0!=t.reimDetail.length?i("v-uni-view",{staticClass:"borrowBox"},t._l(t.reimDetail,(function(e,a){return i("v-uni-view",{key:a,staticClass:"borrowitem"},[i("v-uni-view",[t._v("报销事由："+t._s(e.reimbursementReason))]),i("v-uni-view",[t._v("报销类型："+t._s(t.getDictV(t.remitypes,e.reimbursementType)))]),i("v-uni-view",[t._v("报销金额："+t._s(e.money))]),i("v-uni-view",[t._v("关联表单类型："+t._s(e.relationType))]),i("v-uni-view",[t._v("关联表单："+t._s(e.relationId))]),i("uni-icons",{staticClass:"btnclose",attrs:{type:"close",color:"#cccccc",size:"40"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.dele(a,"2")}}})],1)})),1):t._e()],1),"1"==t.edit?i("v-uni-view",{staticClass:"borrow"},[i("v-uni-view",{staticClass:"borrowtitle"},[t._v("扣款明细")]),0!=t.cutPayment.length?i("v-uni-view",{staticClass:"borrowBox"},t._l(t.cutPayment,(function(e,a){return i("v-uni-view",{key:a,staticClass:"borrowitem"},[i("v-uni-view",[t._v("审批人："+t._s(e.userName))]),i("v-uni-view",[t._v("扣款事由："+t._s(e.reason))]),i("v-uni-view",[t._v("扣款金额："+t._s(e.money))])],1)})),1):t._e()],1):t._e(),i("v-uni-view",{staticClass:"button-sp-area"},["99"==t.formData.status||""==t.formData.status?i("v-uni-button",{staticClass:"mini-btn",attrs:{type:"info",size:"mini",loading:t.loading1},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit("0")}}},[t._v("保存草稿")]):t._e(),"99"==t.formData.status||""==t.formData.status?i("v-uni-button",{staticClass:"mini-btn",attrs:{type:"primary",loading:t.loading2,size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit("1")}}},[t._v("提交")]):t._e(),"3"==t.formData.status?i("v-uni-button",{staticClass:"mini-btn",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitHandler("2")}}},[t._v("提交")]):t._e(),""!=t.formData.status&&"2"!=t.formData.status&&"16"!=t.formData.status&&"99"!=t.formData.status?i("v-uni-button",{staticClass:"mini-btn cui-btn-2",attrs:{type:"info",loading:t.loading3,size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.urge()}}},[t._v("催办")]):t._e(),"99"!=t.formData.status&&""!=t.formData.status?i("v-uni-button",{staticClass:"mini-btn cui-btn-1",attrs:{type:"info",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.send()}}},[t._v("抄送")]):t._e()],1)],1),"1"==t.edit&&t.procInstId?i("uni-process",{attrs:{baseUrl:t.baseUrl,procInstId:t.procInstId,id:t.id}}):t._e(),i("uni-popup",{attrs:{show:t.showborrow,type:t.type,"mask-click":!1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-tip"},[i("v-uni-text",{staticClass:"uni-tip-title"},[t._v("选择项目")]),i("v-uni-scroll-view",{staticClass:"uni-tip-content",attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.borrowlower.apply(void 0,arguments)}}},[0==t.projects.data.length?i("v-uni-view",{staticClass:"loading-more"},[i("v-uni-text",{staticClass:"loading-more-text"},[t._v("暂无项目！")])],1):i("v-uni-view",{staticClass:"uni-list"},[i("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.checkboxChange.apply(void 0,arguments)}}},t._l(t.projects.data,(function(e,a){return i("v-uni-label",{key:e.id,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-radio",{attrs:{value:e.id,checked:a===t.currentP}})],1),i("v-uni-view",[i("v-uni-view",[t._v("项目编号："+t._s(e.code))]),i("v-uni-view",[t._v("负责人："+t._s(e.managerName))]),i("v-uni-view",[t._v("项目名称："+t._s(e.projectName))]),i("v-uni-view",[t._v("项目名称："+t._s(e.projectName))])],1)],1)})),1)],1),t.projects.isLoading||t.projects.total>t.projects.pageSize?i("v-uni-view",{staticClass:"loading-more"},[i("v-uni-text",{staticClass:"loading-more-text"},[t._v(t._s(t.projects.noneText))])],1):t._e()],1),i("v-uni-view",{staticClass:"uni-tip-group-button"},[i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("borrow")}}},[t._v("取消")]),i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("borrow","1")}}},[t._v("确定")])],1)],1)],1),i("uni-popup",{attrs:{show:t.showdetail,type:t.type,"mask-click":!1},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-tip"},[i("v-uni-text",{staticClass:"uni-tip-title"},[t._v("报销明细")]),i("v-uni-view",{staticClass:"uni-tip-content uni-tip-content-detail"},[i("v-uni-form",[i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("事由")]),i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"事由",name:"reimbursementReason"},model:{value:t.details.reimbursementReason,callback:function(e){t.$set(t.details,"reimbursementReason",e)},expression:"details.reimbursementReason"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("报销类型")]),i("v-uni-input",{staticClass:"hidden",attrs:{placeholder:"报销类型",name:"reimbursementType"},model:{value:t.details.reimbursementType,callback:function(e){t.$set(t.details,"reimbursementType",e)},expression:"details.reimbursementType"}}),i("v-uni-view",{staticClass:"uni-input",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.togglePopup("center","type")}}},[t._v(t._s(t.getDictV(t.remitypes,t.details.reimbursementType)))])],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("报销金额")]),i("v-uni-input",{staticClass:"uni-input",attrs:{placeholder:"报销金额",name:"money"},model:{value:t.details.money,callback:function(e){t.$set(t.details,"money",e)},expression:"details.money"}})],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("关联表单类型")]),i("v-uni-input",{staticClass:"uni-input hidden",attrs:{placeholder:"关联表单类型",name:"relationType"},model:{value:t.details.relationType,callback:function(e){t.$set(t.details,"relationType",e)},expression:"details.relationType"}}),i("v-uni-picker",{staticClass:"picker",attrs:{value:t.returnIndex(t.relationTypeList,t.formData.relationType),range:t.relationTypeList,"range-key":"dictLabel"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.relationTypeChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-input"},[t._v(t._s((t.relationTypeList[t.index1]?t.relationTypeList[t.index1]:{}).dictLabel))])],1)],1),i("v-uni-view",{staticClass:"uni-form-item uni-row"},[i("v-uni-view",{staticClass:"title"},[t._v("关联表单")]),i("v-uni-input",{staticClass:"uni-input",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.togglePopup("center","link")}},model:{value:t.details.relationId,callback:function(e){t.$set(t.details,"relationId",e)},expression:"details.relationId"}})],1)],1)],1),i("v-uni-view",{staticClass:"uni-tip-group-button"},[i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("detail")}}},[t._v("取消")]),i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("detail","2")}}},[t._v("确定")])],1)],1)],1),i("uni-popup",{attrs:{show:t.showtype,type:t.type,"mask-click":!1}},[i("v-uni-view",{staticClass:"uni-tip"},[i("v-uni-text",{staticClass:"uni-tip-title"},[t._v("选择报销类型")]),i("v-uni-scroll-view",{staticClass:"uni-tip-content",attrs:{"scroll-y":"true"}},[i("v-uni-view",{staticClass:"uni-list"},[i("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.radioChange.apply(void 0,arguments)}}},t._l(t.remitypes,(function(e,a){return i("v-uni-label",{key:e.dictValue,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-radio",{attrs:{value:e.dictValue,checked:a===t.current}})],1),i("v-uni-view",[i("v-uni-view",[t._v("标签："+t._s(e.dictLabel))]),i("v-uni-view",[t._v("备注："+t._s(e.remark))]),i("v-uni-view",[t._v("键值："+t._s(e.dictValue))])],1)],1)})),1)],1)],1),i("v-uni-view",{staticClass:"uni-tip-group-button"},[i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("type")}}},[t._v("取消")]),i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("type","3")}}},[t._v("确定")])],1)],1)],1),i("uni-popup",{attrs:{show:t.showlink,type:t.type,"mask-click":!1}},[i("v-uni-view",{staticClass:"uni-tip"},[i("v-uni-text",{staticClass:"uni-tip-title"},[t._v("选择关联表单")]),i("v-uni-scroll-view",{staticClass:"uni-tip-content",attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.borrowlowerLinks.apply(void 0,arguments)}}},[0==t.linkForm.data.length?i("v-uni-view",{staticClass:"loading-more"},[i("v-uni-text",{staticClass:"loading-more-text"},[t._v("暂无数据！")])],1):i("v-uni-view",{staticClass:"uni-list"},[i("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.radioChange.apply(void 0,arguments)}}},t._l(t.linkForm.data,(function(e,a){return i("v-uni-label",{key:e.id,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-radio",{attrs:{value:e.id,checked:a===t.currentRelation}})],1),"oatravel"==t.details.relationType?i("v-uni-view",[i("v-uni-view",[t._v("出差天数："+t._s(e.applyDays))]),i("v-uni-view",[t._v("出差原因："+t._s(e.applyReason))]),i("v-uni-view",[t._v("乘坐交通工具："+t._s(e.vehicle))])],1):t._e(),"oaOutgoing"==t.details.relationType?i("v-uni-view",[i("v-uni-view",[t._v("外出起始时间："+t._s(e.goOutStart))]),i("v-uni-view",[t._v("外出结束时间："+t._s(e.goOutEnd))]),i("v-uni-view",[t._v("外出时长："+t._s(e.goOutHour))]),i("v-uni-view",[t._v("外出事由："+t._s(e.reason))])],1):t._e(),"oaOvertime"==t.details.relationType?i("v-uni-view",[i("v-uni-view",[t._v("外出起始时间："+t._s(e.workStart))]),i("v-uni-view",[t._v("外出结束时间："+t._s(e.workEnd))]),i("v-uni-view",[t._v("外出时长："+t._s(e.workHour))]),i("v-uni-view",[t._v("外出事由："+t._s(e.reason))])],1):t._e()],1)})),1)],1),t.linkForm.isLoading||t.linkForm.total>t.linkForm.pageSize?i("v-uni-view",{staticClass:"loading-more"},[i("v-uni-text",{staticClass:"loading-more-text"},[t._v(t._s(t.linkForm.noneText))])],1):t._e()],1),i("v-uni-view",{staticClass:"uni-tip-group-button"},[i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("link")}}},[t._v("取消")]),i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel("link","4")}}},[t._v("确定")])],1)],1)],1)],1)},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},"1fb9":function(t,e,i){"use strict";var a=i("ee27");i("99af"),i("a434"),i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("c964")),s=a(i("05b7")),o=a(i("1581")),r=a(i("541c")),u=a(i("8947")),l=a(i("bac4")),c=[["camera"],["album"],["camera","album"]],d=[["compressed"],["original"],["compressed","original"]],p={components:{uniProcess:u.default,uniIcons:o.default},data:function(){return{id:"",edit:"",user:{},formData:{id:"",userName:"",companyId:"",deptId:"",code:"",projectId:"",title:"",money:null,moneyUpcase:"",receiver:"",receiverAccount:"",receiverOpenBank:"",actualMoney:0,actualMoneyUpcase:"",status:""},baseUrl:"oa/oaReimbursement",addUrl:"oa/oaReimbursement/add",saveUrl:"oa/oaReimbursement/saveDraft",flag:!1,index:0,date:s.default.getDate("dateTime"),company:[],multiArray:[["百川"],[],[]],multiArrayId:[["100"],[],[]],multiIndex:[0,0,0],loading1:!1,loading2:!1,loading3:!1,procInstId:"",borrowdata:[],borrowLists:[],tiptext:"加载中.....",isLoading:!1,pageSize:3,pageNum:1,total:0,reimDetail:[],details:{reimbursementReason:"",reimbursementType:"",money:null,relationType:"oatravel",relationId:""},remitypes:[],current:0,currentP:0,projects:{data:[],pageNum:1,isLoading:!1,refreshText:"",loadingText:"加载更多...",noneText:"加载中.....",total:0,pageSize:10},type:"",showborrow:!1,showdetail:!1,showtype:!1,showproject:!1,showlink:!1,attachmentList:[],title:"choose/previewImage",imageList:[],imageListDetail:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:1,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9],cutPayment:[],linkForm:{data:[],pageNum:1,isLoading:!1,refreshText:"",loadingText:"加载更多...",noneText:"加载中.....",total:0,pageSize:10},currentRelation:0,relationTypeList:[],index1:0}},onLoad:function(t){this.edit=t.edit||"",this.id=t.id||"";var e=this;this.urlRequestPost("/phoneIndexData","",null,(function(t){(t.statusCode="200")&&(e.user=t.data.user,e.$set(e.formData,"companyId",t.data.user.companyId),e.$set(e.formData,"deptId",t.data.user.deptId),e.urlRequestGet("system/dept/list?parentId=100","text/html;charset=UTF-8",(function(t){if(t.statusCode="200"){e.company=t.data;var i=[],a=[],n=0;for(var s in e.company)e.company[s].deptId==e.user.companyId&&(n=s),i.push(e.company[s].deptName),a.push(e.company[s].deptId);e.multiArray[1]=i,e.multiArrayId[1]=a,e.showDeptDetail(n)}})))})),"1"==this.edit&&(this.urlRequestGet(this.baseUrl+"/phoneEdit/"+this.id,"text/html;charset=UTF-8",(function(t){s.default.listAssign(e.formData,t.data),e.procInstId=t.data.procInstId})),this.urlRequestPost("oa/oaReimbursementDetail/list",{parentId:this.id},null,(function(t){var i=function(i){var a=t.data.rows[i];a.attachmentList=[],a.imgdetail=[];var n=t.data.rows[i].id;e.urlRequestPost("oa/oaAttachment/selectAttach",{objectId:t.data.rows[i].id,sourceTable:"oa_reimbursement_detail"},null,(function(t){for(var i in t.data.data)a.imgdetail.push(t.data.data[i].attachmentUrl),a.attachmentList.push({objectId:n,attachmentName:t.data.data[i].attachmentName,fileName:t.data.data[i].fileName});e.reimDetail.push(a)}))};for(var a in t.data.rows)i(a)})),this.urlRequestPost("oa/oaBorrowMoney/getBorrowMoneyByOther",{tableColumn:"borrow_id",tableName:"oa_reimbursement_borrow",tableMid:"reimbursement_id",midValue:this.id},"application/json;charset=UTF-8",(function(t){for(var i in t.data.rows)e.borrowLists.push(t.data.rows[i])})),this.urlRequestPost("oa/oaAttachment/selectAttachByObjectId",{objId:this.id},null,(function(t){for(var i in t.data.data)e.imageList.push(e.websiteUrl+t.data.data[i].attachmentName),e.attachmentList.push({objectId:e.id,attachmentName:t.data.data[i].attachmentName,fileName:t.data.data[i].fileNamess})})),this.urlRequestPost("oa/oaReimbursementCut/phoneList",{parentId:this.id},"application/json;charset=UTF-8",(function(t){for(var i in t.data.rows)e.cutPayment.push(t.data.rows[i])}))),this.getBorrowList(),this.dictValue("oa_reimbursement_type").then((function(t){e.remitypes=t.data})),this.dictValue("oa_reimbursement_link").then((function(t){e.relationTypeList=t.data})),this.getLinksList()},methods:{submit:function(t){var e=this,i="",a={},n=[{name:"money",checkType:"notnull",checkRule:"",errorMsg:"报销金额必填"},{name:"moneyUpcase",checkType:"notnull",checkRule:"",errorMsg:"金额大写必填"}];a.oaReimbursement=this.formData,a.attachmentList=this.attachmentList,a.detailList=this.reimDetail,a.relationList=this.borrowLists;var s=r.default.check(this.formData,n);if(s){switch(t){case"1":i=this.addUrl,this.loading2=!0;break;case"0":i=this.saveUrl,this.loading1=!0;break}this.urlRequestPost(i,a,"application/json;charset=UTF-8",(function(t){e.loading1=!1,e.loading2=!1,uni.showToast({title:t.data.msg,icon:"none"}),"0"==t.data.code&&uni.reLaunch({url:"../../start/start"})}))}else uni.showToast({title:r.default.error,icon:"none"})},send:function(){uni.navigateTo({url:"../../send/send?id="+this.id+"&url="+this.baseUrl})},urge:function(){var t=this;this.loading3=!0,this.urlRequestGet(this.baseUrl+"/urge/"+this.id,null,(function(e){uni.showToast({title:e.data.msg,icon:"none"}),0==e.data.code&&(t.loading3=!1,uni.reLaunch({url:"../../start/start"}))}))},Upcase:function(){var t=this;this.urlRequestGet("common/converMoneyToCN/"+this.formData.money,null,(function(e){t.$set(t.formData,"moneyUpcase",e.data.msg)}))},togglePopup:function(t,e){switch(t){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}"detail"==e&&(this.details={reimbursementReason:"",reimbursementType:"",money:null,relationType:"",relationId:""},this.imageListDetail=[]),this.type=t,this["show"+e]=!0},cancel:function(t,e){this["show"+t]=!1,"1"==e?(this.$set(this.formData,"projectId",this.projects.data[this.currentP].id),this.$set(this.formData,"title",this.projects.data[this.currentP].projectName)):"2"==e?this.reimDetail.push(this.details):"3"==e?this.$set(this.details,"reimbursementType",this.remitypes[this.current].dictValue):"4"==e&&this.$set(this.details,"relationId",this.linkForm.data[this.currentRelation].id)},ifadd:function(t){var e=!1;for(var i in this.borrowLists)t==this.borrowLists[i].id&&(e=!0);return e},change:function(t){t.show||(this.showborrow=!1,this.showdetail=!1,this.showtype=!1,this.showproject=!1,this.showlink=!1)},checkboxChange:function(t){for(var e=this.projects.data,i=t.target.value,a=0;a<e.length;a++)if(e[a].id===i){this.currentP=a;break}},radioChange:function(t){for(var e=0;e<this.remitypes.length;e++)if(this.remitypes[e].dictValue===t.target.value){this.current=e;break}},relationRadioChange:function(t){for(var e=0;e<this.remitypes.length;e++)if(this.linkForm.data[e].id===t.target.value){this.currentRelation=e;break}},relationTypeChange:function(t){this.index1=t.target.value,this.details.relationType=this.relationTypeList[this.index1].dictValue,this.getLinksList()},getBorrowList:function(){var t=this;this.urlRequestPost("oa/oaProject/phoneList",{pageSize:this.projects.pageSize,pageNum:this.projects.pageNum},null,(function(e){var i=t.projects.data,a=[];for(var n in e.data.rows)a.push(e.data.rows[n]);t.projects.pageNum<=1?t.projects.data=a:t.projects.data=i.concat(a),t.projects.total=e.data.total}))},borrowlower:function(t){var e=this;setTimeout((function(){var t=Math.ceil(e.projects.total/e.projects.pageSize);e.projects.pageNum<t?(e.projects.pageNum++,e.getBorrowList()):e.projects.noneText="没有数据了！"}),500)},getLinksList:function(){var t=this;this.urlRequestPost("oa/"+this.details.relationType+"/list",{pageSize:this.linkForm.pageSize,pageNum:this.linkForm.pageNum},null,(function(e){var i=t.linkForm.data,a=[];for(var n in e.data.rows)a.push(e.data.rows[n]);t.linkForm.pageNum<=1?t.linkForm.data=a:t.linkForm.data=i.concat(a),t.linkForm.total=e.data.total}))},borrowlowerLinks:function(t){var e=this;setTimeout((function(){var t=Math.ceil(e.linkForm.total/e.linkForm.pageSize);e.linkForm.pageNum<t?(e.linkForm.pageNum++,e.getLinksList()):e.linkForm.noneText="没有数据了！"}),500)},dele:function(t,e){"1"==e?this.borrowLists.splice(t,1):"2"==e&&this.reimDetail.splice(t,1)},getDictV:function(t,e){var i="";for(var a in t)t[a].dictValue==e&&(i=t[a].dictLabel);return i},returnIndex:function(t,e){var i="";for(var a in t)t[a].dictValue==e&&(i=a);return i},chooseImage:function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(e){var i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=0,t.t0=e,t.next="0"===t.t0?4:"1"===t.t0?6:8;break;case 4:return i=this.imageList.length+this.count[this.countIndex]>9?9-this.imageList.length:this.count[this.countIndex],t.abrupt("break",8);case 6:return i=this.imageListDetail.length+this.count[this.countIndex]>9?9-this.imageListDetail.length:this.count[this.countIndex],t.abrupt("break",8);case 8:if(9!==this.imageList.length){t.next=14;break}return t.next=11,this.isFullImg();case 11:if(a=t.sent,a){t.next=14;break}return t.abrupt("return");case 14:n=this,uni.chooseImage({sourceType:c[this.sourceTypeIndex],sizeType:d[this.sizeTypeIndex],count:i,success:function(t){var i=t.tempFilePaths,a=function(t){uni.uploadFile({url:n.websiteUrl+"common/bootstrapFileInputUpload",filePath:i[t],fileType:"image",name:"data",success:function(a){uni.showToast({title:"上传成功",icon:"success",duration:1e3});var s={attachmentName:JSON.parse(a.data).fileName,fileName:JSON.parse(a.data).sourceFileName};"0"==e?(n.imageList.push(i[t]),n.attachmentList.push(s)):(n.imageListDetail.push(i[t]),n.details.attachmentList.push(s))},fail:function(t){uni.showModal({content:t.errMsg,showCancel:!1})}})};for(var s in i)a(s)},fail:function(t){}});case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),isFullImg:function(){var t=this;return new Promise((function(e){uni.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(i){i.confirm?(t.imageList=[],e(!0)):e(!1)},fail:function(){e(!1)}})}))},previewImage:function(t){var e=t.target.dataset.src;uni.previewImage({current:e,urls:this.imageList})},deleImage:function(t){var e=t;this.imageList.splice(e,1),this.attachmentList.splice(e,1)},checkPermission:function(t){var e=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t?t-1:e.sourceTypeIndex,!l.default.isIOS){i.next=7;break}return i.next=4,l.default.requestIOS(c[a][0]);case 4:i.t0=i.sent,i.next=10;break;case 7:return i.next=9,l.default.requestAndroid(0===a?"android.permission.CAMERA":"android.permission.READ_EXTERNAL_STORAGE");case 9:i.t0=i.sent;case 10:return n=i.t0,null===n||1===n?n=1:uni.showModal({content:"没有开启权限",confirmText:"设置",success:function(t){t.confirm&&l.default.gotoAppSetting()}}),i.abrupt("return",n);case 13:case"end":return i.stop()}}),i)})))()},bindMultiPickerColumnChange:function(t){this.multiIndex[t.detail.column]=t.detail.value,1==t.detail.column&&this.showDeptDetail(t.detail.value),2==t.detail.column&&(this.formData.applyDeptId=this_.multiArrayId[2][t.detail.value]),this.$forceUpdate()},showDeptDetail:function(t){var e=this;this.urlRequestGet("system/dept/list?parentId="+this.company[t].deptId,"text/html;charset=UTF-8",(function(i){if(200==i.statusCode){var a=[],n=[];for(var s in i.data)a.push(i.data[s].deptName),n.push(i.data[s].deptId);e.multiArray[2]=a,e.multiArrayId[2]=n,e.multiArray.splice(0,0),e.multiArrayId.splice(0,0),e.user.companyId=e.multiArrayId[1][e.multiIndex[1]],e.user.deptId=e.multiArrayId[2][e.multiIndex[2]],e.multiIndex[1]=t}}))},onBackPress:function(){if(this.showborrow||this.showdetail||this.showtype||this.showproject)return this.showborrow=!1,this.showdetail=!1,this.showtype=!1,this.showproject=!1,!0}}};e.default=p},"2d19":function(t,e,i){"use strict";i.r(e);var a=i("d9d5"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"2d4a":function(t,e,i){"use strict";i.r(e);var a=i("1fb9"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},"53bc":function(t,e,i){"use strict";var a=i("d7ff"),n=i.n(a);n.a},"7d85":function(t,e,i){"use strict";i.r(e);var a=i("137a"),n=i("2d4a");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("ce54");var o,r=i("f0c5"),u=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"1ed6c43d",null,!1,a["a"],o);e["default"]=u.exports},"925a":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".uni-input[data-v-1ed6c43d],.title[data-v-1ed6c43d]{padding:7px 12px;background:#f7f7f7}.title[data-v-1ed6c43d]{font-weight:700}.picker[data-v-1ed6c43d]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.hidden[data-v-1ed6c43d]{display:none}.button-sp-area[data-v-1ed6c43d]{margin:30px auto;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.mini-btn[data-v-1ed6c43d]{margin-right:%?10?%;margin:0 %?5?%}.cui-btn-1[data-v-1ed6c43d]{background-color:#0a98d5;color:#fff}.cui-btn-2[data-v-1ed6c43d]{background-color:#fa0;color:#fff}.textTile[data-v-1ed6c43d]{\r\n\t\t/*borde r-left:3px solid #007AFF;\r\n\t\tline-height: 18px;\r\n\t\tpaddin g-left: 10px;*/margin:20px 0 10px 0;margib-left:20px;color:#999;text-align:center}.red[data-v-1ed6c43d]{color:#f33}.filetitlee[data-v-1ed6c43d]{font-weight:700}.borrow[data-v-1ed6c43d]{margin-bottom:%?20?%}.borrowbtn[data-v-1ed6c43d]{width:90%;margin:0 auto}.borrowBox[data-v-1ed6c43d]{width:90%;margin:0 auto;margin-top:%?15?%}.borrowitem[data-v-1ed6c43d]{border-bottom:%?1?% solid #e2e2e2;padding:%?20?% %?20?%;background:#f8f8f8;position:relative}.btnclose[data-v-1ed6c43d]{position:absolute;right:0;bottom:0}.uni-list-cell[data-v-1ed6c43d]{-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.loading-more[data-v-1ed6c43d]{-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding-top:10px;padding-bottom:10px;text-align:center}.loading-more-text[data-v-1ed6c43d]{font-size:%?28?%;color:#999}.disabled[data-v-1ed6c43d]{background-color:#ebebeb}\r\n\t/* 提示窗口 */.uni-tip[data-v-1ed6c43d]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\r\npadding:15px;width:300px;background-color:#fff;border-radius:10px;z-index:99999}.uni-tip-title[data-v-1ed6c43d]{text-align:center;font-weight:700;font-size:16px;color:#333}.uni-tip-content[data-v-1ed6c43d]{\r\n\t\t/* padding: 15px;\r\n*/font-size:14px;color:#666;height:%?650?%}.uni-tip-group-button[data-v-1ed6c43d]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\r\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding-top:20px;border-top:%?1?% solid #ddd}.uni-tip-button[data-v-1ed6c43d]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;font-size:14px;color:#3b4144}\r\n\t/* //附件 */.list-pd[data-v-1ed6c43d]{width:100%}.cell-pd[data-v-1ed6c43d]{padding:%?22?% %?30?%}.uni-uploader_close[data-v-1ed6c43d]{position:relative}.closeBtn[data-v-1ed6c43d]{position:absolute;top:%?0?%;right:%?0?%;width:%?40?%;height:%?45?%;background:hsla(0,0%,100%,.5);text-align:center}.closeB[data-v-1ed6c43d]{margin:0 auto;color:#fff;font-size:%?28?%;line-height:%?40?%}\r\n\t/*  */.borrowtitle[data-v-1ed6c43d]{font-size:%?28?%;background:#f8f8f8;text-align:center;border-bottom:%?1?% solid #ccc;padding:%?20?%}.borrow[data-v-1ed6c43d]{margin-bottom:%?20?%}",""]),t.exports=e},ce54:function(t,e,i){"use strict";var a=i("fda8"),n=i.n(a);n.a},d441:function(t,e,i){"use strict";i.r(e);var a=i("fa5f"),n=i("2d19");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("53bc");var o,r=i("f0c5"),u=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"33b3e770",null,!1,a["a"],o);e["default"]=u.exports},d7ff:function(t,e,i){var a=i("09fe");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("0176588c",a,!0,{sourceMap:!1,shadowMode:!1})},d9d5:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){},methods:{clear:function(){},open:function(){var t=this;this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick((function(){setTimeout((function(){t.ani="uni-"+t.type}),100)}))},close:function(t){var e=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick((function(){setTimeout((function(){e.showPopup=!1}),300)})))}}};e.default=a},fa5f:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showPopup?i("v-uni-view",{staticClass:"uni-popup",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"uni-popup__mask",class:[t.ani+"-mask",t.animation?"mask-ani":""],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}}),i("v-uni-view",{staticClass:"uni-popup__wrapper",class:[t.type,t.ani+"-content",t.animation?"content-ani":""],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close(!0)}}},[i("v-uni-view",{staticClass:"uni-popup__wrapper-box",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[t._t("default")],2)],1)],1):t._e()},s=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}))},fda8:function(t,e,i){var a=i("925a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("7718b6d6",a,!0,{sourceMap:!1,shadowMode:!1})}}]);