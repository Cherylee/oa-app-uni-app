<view class="uni-common-mt"><form><input data-event-opts="{{[['input',[['__set_model',['$0','id','$event',[]],['formData']]]]]}}" class="hidden" value="{{formData.id}}" bindinput="__e"/><view class="uni-form-item uni-row"><view class="title">申请人</view><input class="uni-input" placeholder="申请人" data-event-opts="{{[['input',[['__set_model',['$0','userName','$event',[]],['formData']]]]]}}" value="{{formData.userName}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">申请公司</view><d-picker class="uni-input" vue-id="580a396a-1" companyId="{{formData.companyId}}" deptId="{{formData.deptId}}" data-event-opts="{{[['^getDeptV',[['getDeptV']]]]}}" bind:getDeptV="__e" bind:__l="__l"></d-picker></view><view class="uni-form-item uni-row"><view class="title">项目</view><input data-event-opts="{{[['tap',[['togglePopup',['center','popup','2']]]],['input',[['__set_model',['$0','projectName','$event',[]],['formData']]]]]}}" class="uni-input" value="{{formData.projectName}}" bindtap="__e" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">收款日期</view><e-picker class="uni-input" vue-id="580a396a-2" mode="dateTime" showValue="{{formData.receivablesDate}}" data-event-opts="{{[['^change',[['changeStart']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}">{{formData.receivablesDate}}</e-picker></view><view class="uni-form-item uni-row"><view class="title"><label class="red _span">*</label>收款金额</view><input class="uni-input" placeholder="收款金额" data-event-opts="{{[['input',[['__set_model',['$0','money','$event',[]],['formData']],['Upcase']]]]}}" value="{{formData.money}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title"><label class="red _span">*</label>金额大写</view><input class="uni-input" disabled="{{true}}" placeholder="金额大写" data-event-opts="{{[['input',[['__set_model',['$0','moneyUpcase','$event',[]],['formData']]]]]}}" value="{{formData.moneyUpcase}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">收款事由</view><input class="uni-input" placeholder="收款事由" data-event-opts="{{[['input',[['__set_model',['$0','reason','$event',[]],['formData']]]]]}}" value="{{formData.reason}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">款项来源人</view><input class="uni-input" placeholder="款项来源人" data-event-opts="{{[['input',[['__set_model',['$0','payee','$event',[]],['formData']]]]]}}" value="{{formData.payee}}" bindinput="__e"/></view><uni-uploader vue-id="580a396a-3" imageList="{{fileList}}" os="{{os}}" data-event-opts="{{[['^attachmentList',[['getAttachmentList']]]]}}" bind:attachmentList="__e" bind:__l="__l"></uni-uploader><view class="borrow"><button class="mini-btn borrowbtn" type="info" data-event-opts="{{[['tap',[['togglePopup',['center','detail','0']]]]]}}" bindtap="__e">收款明细</button><block wx:if="{{detailList.length!=0}}"><view class="borrowBox"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="borrowitem"><block wx:if="{{item.$orig.receivableType}}"><view>{{"收款类型："+item.m0}}</view></block><block wx:if="{{item.$orig.paymentType}}"><view>{{"款项类别："+item.m1}}</view></block><block wx:if="{{item.$orig.moneyPurpost}}"><view>{{"款项用途："+moneyPurpostList[index]}}</view></block><view>{{"收款金额："+item.$orig.receivableCost}}</view><view>{{"备注："+item.$orig.remark}}</view><uni-icons class="btnclose" vue-id="{{'580a396a-4-'+index}}" type="close" color="#cccccc" size="40" data-event-opts="{{[['^tap',[['dele',[index,'1']]]]]}}" bind:tap="__e" bind:__l="__l"></uni-icons></view></block></view></block></view><view class="_br"></view><view class="borrow"><button class="mini-btn borrowbtn" type="info" data-event-opts="{{[['tap',[['togglePopup',['center','popup','1']]]]]}}" bindtap="__e">抵扣借款单</button><block wx:if="{{borrowsList.length!=0}}"><view class="borrowBox"><block wx:for="{{borrowsList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="borrowitem"><view>{{"借款编号："+item.code}}</view><view>{{"借款用途："+item.borrowReason}}</view><view>{{"借款金额："+item.borrowAmount}}</view><view>{{"冲抵金额："+item.offsetAmount}}</view><view>{{"剩余可冲抵金额："+item.borrowMoney}}</view><uni-icons class="btnclose" vue-id="{{'580a396a-5-'+index}}" type="close" color="#cccccc" size="40" data-event-opts="{{[['^tap',[['dele',[index,'2']]]]]}}" bind:tap="__e" bind:__l="__l"></uni-icons></view></block></view></block></view><view class="button-sp-area"><block wx:if="{{formData.status=='99'||formData.status==''}}"><button class="mini-btn" type="info" size="mini" loading="{{loading1}}" data-event-opts="{{[['tap',[['submit',['0']]]]]}}" bindtap="__e">保存草稿</button></block><block wx:if="{{formData.status=='99'||formData.status==''}}"><button class="mini-btn" type="primary" loading="{{loading2}}" size="mini" data-event-opts="{{[['tap',[['submit',['1']]]]]}}" bindtap="__e">提交</button></block><block wx:if="{{formData.status=='3'}}"><button class="mini-btn" type="primary" size="mini" data-event-opts="{{[['tap',[['submit',['2']]]]]}}" bindtap="__e">提交</button></block><block wx:if="{{formData.status!=''&&formData.status!='2'&&formData.status!='16'&&formData.status!='99'}}"><button class="mini-btn cui-btn-2" type="info" loading="{{loading3}}" size="mini" data-event-opts="{{[['tap',[['urge']]]]}}" bindtap="__e">催办</button></block><block wx:if="{{formData.status!='99'&&formData.status!=''}}"><button class="mini-btn cui-btn-1" type="info" size="mini" data-event-opts="{{[['tap',[['send']]]]}}" bindtap="__e">抄送</button></block></view><block wx:if="{{edit=='1'&&procInstId}}"><uni-process vue-id="580a396a-6" baseUrl="{{baseUrl}}" procInstId="{{procInstId}}" mid="{{mid}}" bind:__l="__l"></uni-process></block></form><uni-popup vue-id="580a396a-7" show="{{showdetail}}" type="{{type}}" mask-click="{{false}}" data-event-opts="{{[['^change',[['change']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="uni-tip"><text class="uni-tip-title">明细记录</text><scroll-view class="uni-tip-content uni-tip-content-detail" scroll-y><form><block wx:if="{{!formData.projectId}}"><view class="uni-form-item uni-row"><view class="title">收款类型</view><picker class="picker" value="{{index1}}" range="{{receivableType}}" range-key="dictLabel" data-event-opts="{{[['change',[['receivableTypeFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(receivableType[index1]?receivableType[index1]:{}).dictLabel}}</view></picker></view></block><block wx:if="{{formData.projectId}}"><view class="uni-form-item uni-row"><view class="title">款项类别</view><picker class="picker" value="{{index2}}" range="{{paymentType}}" range-key="dictLabel" data-event-opts="{{[['change',[['paymentTypeFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(paymentType[index2]?paymentType[index2]:{}).dictLabel}}</view></picker></view></block><block wx:if="{{formData.projectId}}"><view class="uni-form-item uni-row"><view class="title">款项用途</view><picker class="picker" value="{{index3}}" range="{{moneyPurpost}}" range-key="dictLabel" data-event-opts="{{[['change',[['moneyPurpostFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(moneyPurpost[index3]?moneyPurpost[index3]:{}).dictLabel}}</view></picker></view></block><view class="uni-form-item uni-row"><view class="title">收款金额</view><input class="uni-input" placeholder="收款金额" data-event-opts="{{[['input',[['__set_model',['$0','receivableCost','$event',[]],['details']]]]]}}" value="{{details.receivableCost}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">备注</view><input class="uni-input" placeholder="备注" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['details']]]]]}}" value="{{details.remark}}" bindinput="__e"/></view></form></scroll-view><view class="uni-tip-group-button"><text data-event-opts="{{[['tap',[['cancel',['detail']]]]]}}" class="uni-tip-button" bindtap="__e">取消</text><text data-event-opts="{{[['tap',[['cancel',['detail','1']]]]]}}" class="uni-tip-button" bindtap="__e">确定</text></view></view></uni-popup><uni-popup vue-id="580a396a-8" show="{{showpopup}}" type="{{type}}" mask-click="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-relation-popup vue-id="{{('580a396a-9')+','+('580a396a-8')}}" setPopup="{{popupData}}" data-event-opts="{{[['^getData',[['getData']]],['^popupState',[['popupState']]]]}}" bind:getData="__e" bind:popupState="__e" bind:__l="__l"></uni-relation-popup></uni-popup></view>