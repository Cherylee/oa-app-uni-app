(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/oa/sysProRepairMoney/sysProRepairMoney"],{"0953":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={dPicker:function(){return n.e("components/d-picker/d-picker").then(n.bind(null,"09d9"))},ePicker:function(){return Promise.all([n.e("common/vendor"),n.e("components/e-picker/e-picker")]).then(n.bind(null,"d113"))},uniUploader:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-uploader/uni-uploader")]).then(n.bind(null,"d7c2"))},uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"d441"))},uniRelationPopup:function(){return n.e("components/uni-relation-popup/uni-relation-popup").then(n.bind(null,"4f53"))}},a=function(){var t=this,e=t.$createElement;t._self._c},i=[]},"3dd0":function(t,e,n){"use strict";var o=n("4d1e"),a=n.n(o);a.a},"4d1e":function(t,e,n){},"5bda":function(t,e,n){"use strict";n.r(e);var o=n("0953"),a=n("bc83");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("3dd0");var r,c=n("f0c5"),s=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=s.exports},bc83:function(t,e,n){"use strict";n.r(e);var o=n("d2d9"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},d2d9:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("05b7")),a=r(n("541c")),i=(r(n("bac4")),n("2f62"));function r(t){return t&&t.__esModule?t:{default:t}}var c=function(){Promise.all([n.e("common/vendor"),n.e("components/e-picker/e-picker")]).then(function(){return resolve(n("d113"))}.bind(null,n)).catch(n.oe)},s=function(){n.e("components/d-picker/d-picker").then(function(){return resolve(n("09d9"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/uni-processList/nui-processList").then(function(){return resolve(n("8947"))}.bind(null,n)).catch(n.oe)},p=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-uploader/uni-uploader")]).then(function(){return resolve(n("d7c2"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/uni-relation-popup/uni-relation-popup").then(function(){return resolve(n("4f53"))}.bind(null,n)).catch(n.oe)},l={components:{ePicker:c,uniProcess:u,upload:p,dPicker:s,uniRelationPopup:d},data:function(){return{mid:"",edit:"0",user:{},os:!1,formData:{id:"",userName:"",projectId:"",projectName:"",companyId:"",companyName:"",deptId:"",deptName:"",expectValidityDate:o.default.getDate("date"),amount:0,moneyUpper:"",projectLoc:"",projectCompleteDate:o.default.getDate("date"),projectSettlementDate:o.default.getDate("date"),projectDefectPeriod:"",projectManager:"",projectSettlementAmount:"",projectRepairAmount:"",remark:"",status:""},baseUrl:"oa/sysProRepairMoney",addUrl:"oa/sysProRepairMoney/add",saveUrl:"oa/sysProRepairMoney/saveDraft",editUrl:"oa/sysProRepairMoney/submitDraft",flag:!1,index:0,dateStart:o.default.getDate("dateTime"),loading1:!1,loading2:!1,loading3:!1,procInstId:"",fileList:[],attachmentList:[],type:"",showpopup:!1,popupData:{titile:"工程",selectType:"radio",url:"oa/oaProject/phoneList",popupType:"project"}}},computed:(0,i.mapState)(["name","deptId","companyId","hasLogin"]),onLoad:function(t){this.edit=t.edit||"0",this.mid=t.id||"";var e=this;"0"==this.edit&&(this.$set(this.formData,"userName",this.name),this.$set(this.formData,"companyId",this.companyId),this.$set(this.formData,"deptId",this.deptId)),"1"==this.edit&&(this.urlRequestGet(this.baseUrl+"/phoneEdit/"+this.mid,"text/html;charset=UTF-8",(function(t){console.log(t),o.default.listAssign(e.formData,t.data),e.procInstId=t.data.procInstId})),this.urlRequestPost("oa/oaAttachment/selectAttachByObjectId",{objId:this.mid},null,(function(t){for(var n in t.data.data)e.fileList.push(e.websiteUrl+t.data.data[n].attachmentName),e.attachmentList.push({objectId:e.id,attachmentName:t.data.data[n].attachmentName,fileName:t.data.data[n].fileNamess})})))},methods:{submit:function(e){var n=this,o="",i={},r=[{name:"amount",checkType:"notnull",checkRule:"",errorMsg:"金额必填"},{name:"moneyUpper",checkType:"notnull",checkRule:"",errorMsg:"大写必填"},{name:"projectName",checkType:"notnull",checkRule:"",errorMsg:"工程必填"}];i=this.formData,i.attachmentList=this.attachmentList;var c=a.default.check(this.formData,r);if(c){switch(e){case"1":o=this.addUrl,this.loading2=!0;break;case"0":o=this.saveUrl,this.loading1=!0;break;case"2":o=this.editUrl,this.loading1=!0;break}this.urlRequestPost(o,i,"application/json;charset=UTF-8",(function(e){n.loading1=!1,n.loading2=!1,t.showToast({title:e.data.msg,icon:"none"}),"0"==e.data.code&&t.reLaunch({url:"../../start/start"})}))}else t.showToast({title:a.default.error,icon:"none"})},Upcase:function(){var t=this;this.urlRequestGet("common/converMoneyToCN/"+this.formData.amount,null,(function(e){t.$set(t.formData,"moneyUpper",e.data.msg)}))},togglePopup:function(t,e,n){switch(t){case"top":this.content="顶部弹出 popup";break;case"bottom":this.content="底部弹出 popup";break;case"center":this.content="居中弹出 popup";break}this.popupData.titile="工程",this.popupData.selectType="radio",this.popupData.url="oa/oaProject/phoneList",this.popupData.popupType="project",this.type=t,this["show"+e]=!0},cancel:function(t,e){this["show"+t]=!1},change:function(t){t.show||(this.showdetail=!1)},getDeptV:function(t){this.formData.deptId=t.deptId,this.formData.companyId=t.companyId},getAttachmentList:function(t){this.attachmentList=t},getData:function(t){t[0].popupType&&(this.$set(this.formData,"projectId",t[0].id),this.$set(this.formData,"projectName",t[0].projectName))},popupState:function(t){this.showpopup=t},changeStart:function(t){this.formData.expectValidityDate=t},changeEnd:function(t){this.formData.projectCompleteDate=t},changeEnd1:function(t){this.formData.projectSettlementDate=t}}};e.default=l}).call(this,n("543d")["default"])},ed12:function(t,e,n){"use strict";(function(t){n("8485");o(n("66fd"));var e=o(n("5bda"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["ed12","common/runtime","common/vendor"]]]);