<view class="uni-common-mt"><form><input data-event-opts="{{[['input',[['__set_model',['$0','id','$event',[]],['formData']]]]]}}" class="hidden" value="{{formData.id}}" bindinput="__e"/><view class="uni-form-item uni-row"><view class="title">申请人</view><input class="uni-input" placeholder="申请人" data-event-opts="{{[['input',[['__set_model',['$0','userName','$event',[]],['formData']]]]]}}" value="{{formData.userName}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">申请公司</view><block wx:if="{{formData.companyId}}"><d-picker class="uni-input" vue-id="1daa5a51-1" companyId="{{formData.companyId}}" deptId="{{formData.deptId}}" data-event-opts="{{[['^getDeptV',[['getDeptV']]]]}}" bind:getDeptV="__e" bind:__l="__l"></d-picker></block></view><view class="uni-form-item uni-row"><view class="title"><label class="red _span">*</label>项目</view><input data-event-opts="{{[['tap',[['togglePopup',['center','popup','2']]]],['input',[['__set_model',['$0','projectName','$event',[]],['formData']]]]]}}" class="uni-input" value="{{formData.projectName}}" bindtap="__e" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">支付日期</view><input data-event-opts="{{[['input',[['__set_model',['$0','payDate','$event',[]],['formData']]]]]}}" class="hidden" value="{{formData.payDate}}" bindinput="__e"/><e-picker class="uni-input" vue-id="1daa5a51-2" mode="dateTime" showValue="{{formData.payDate}}" data-event-opts="{{[['^change',[['changeStart']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}">{{formData.payDate}}</e-picker></view><view class="uni-form-item uni-row"><view class="title"><label class="red _span">*</label>付款金额</view><input class="uni-input" disabled="disabled" placeholder="付款金额" data-event-opts="{{[['input',[['__set_model',['$0','money','$event',[]],['formData']]]]]}}" value="{{formData.money}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title"><label class="red _span">*</label>金额大写</view><input class="uni-input" disabled="{{true}}" placeholder="金额大写" data-event-opts="{{[['input',[['__set_model',['$0','moneyUpcase','$event',[]],['formData']]]]]}}" value="{{formData.moneyUpcase}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">付款方</view><input class="uni-input" placeholder="付款方" data-event-opts="{{[['input',[['__set_model',['$0','drawee','$event',[]],['formData']]]]]}}" value="{{formData.drawee}}" bindinput="__e"/></view><block wx:if="{{!formData.projectId}}"><view class="uni-form-item uni-row"><view class="title">付款方式</view><picker class="picker" value="{{index3}}" range="{{payType}}" range-key="dictLabel" data-event-opts="{{[['change',[['payTypeFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(payType[index3]?payType[index3]:{}).dictLabel}}</view></picker></view></block><block wx:if="{{formData.projectId}}"><view class="uni-form-item uni-row"><view class="title">付款类型</view><picker class="picker" value="{{index7}}" range="{{payTypeProject}}" range-key="dictLabel" data-event-opts="{{[['change',[['payTypeProjectFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(payTypeProject[index7]?payTypeProject[index7]:{}).dictLabel}}</view></picker></view></block><view class="uni-form-item uni-row"><view class="title">到账截止日期</view><e-picker class="uni-input" vue-id="1daa5a51-3" mode="date" showValue="{{formData.expirationDate}}" data-event-opts="{{[['^change',[['changeEnd']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}">{{formData.expirationDate}}</e-picker></view><view class="uni-form-item uni-row"><view class="title">是否代收代付</view><picker class="picker" value="{{index1}}" range="{{yes_no}}" range-key="dictLabel" data-event-opts="{{[['change',[['isAgent',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(yes_no[index1]?yes_no[index1]:{}).dictLabel}}</view></picker></view><view class="uni-form-item uni-row"><view class="title">关联收款</view><input class="uni-input" disabled="true" data-event-opts="{{[['tap',[['togglePopup',['center','popup','1']]]],['input',[['__set_model',['$0','receivablesName','$event',[]],['formData']]]]]}}" value="{{formData.receivablesName}}" bindtap="__e" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">是否委托关联公司代付</view><picker class="picker" value="{{index2}}" range="{{yes_no}}" range-key="dictLabel" data-event-opts="{{[['change',[['companyPay',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(yes_no[index2]?yes_no[index2]:{}).dictLabel}}</view></picker></view><view class="uni-form-item uni-row"><view class="title">备注</view><input class="uni-input" name="remark" placeholder="备注" data-event-opts="{{[['input',[['__set_model',['$0','remark','$event',[]],['formData']]]]]}}" value="{{formData.remark}}" bindinput="__e"/></view><uni-uploader vue-id="1daa5a51-4" imageList="{{fileList}}" os="{{os}}" data-event-opts="{{[['^attachmentList',[['getAttachmentList']]]]}}" bind:attachmentList="__e" bind:__l="__l"></uni-uploader><view class="borrow"><button class="mini-btn borrowbtn" type="info" data-event-opts="{{[['tap',[['togglePopup',['center','detail','0']]]]]}}" bindtap="__e">付款明细</button><block wx:if="{{detailList.length!=0}}"><view class="borrowBox"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="borrowitem"><view>{{"付款事由："+item.$orig.paymentReason}}</view><view>{{"付款金额："+item.$orig.money}}</view><block wx:if="{{item.$orig.payType}}"><view>{{"付款类型："+item.m0}}</view></block><block wx:if="{{item.$orig.proCategory}}"><view>{{"工程大类："+item.m1}}</view></block><block wx:if="{{item.$orig.detailCategory}}"><view>{{"工程小类："+item.$orig.detailCategory}}</view></block><view>{{"收款人："+item.$orig.payee}}</view><view>{{"收款人账号："+item.$orig.payeeAccount}}</view><view>{{"收款人开户行："+item.$orig.payeeOpenBank}}</view><block wx:if="{{details.relationBillType=='0'}}"><view>{{"欠票金额："+item.$orig.oweBillMoney}}</view></block><block wx:if="{{details.relationBillType=='0'}}"><view>{{"收票截止日期："+item.$orig.billExpirationDate}}</view></block><block wx:if="{{details.relationContractType=='0'}}"><view>{{"欠合同金额："+item.$orig.oweContractMoney}}</view></block><block wx:if="{{details.relationContractType=='0'}}"><view>{{"补合同截止日期："+item.$orig.contractExpirationDate}}</view></block><block wx:if="{{details.relationBillType=='2'}}"><view>{{"发票："+item.$orig.relationBillName}}</view></block><block wx:if="{{details.relationContractType=='2'}}"><view>{{"合同："+item.$orig.relationContractName}}</view></block><uni-icons class="btnclose" vue-id="{{'1daa5a51-5-'+index}}" type="close" color="#cccccc" size="40" data-event-opts="{{[['^tap',[['dele',[index,'2']]]]]}}" bind:tap="__e" bind:__l="__l"></uni-icons></view></block></view></block></view><block wx:if="{{edit=='1'&&procInstId}}"><uni-process vue-id="1daa5a51-6" baseUrl="{{baseUrl}}" procInstId="{{procInstId}}" mid="{{mid}}" bind:__l="__l"></uni-process></block><view class="button-sp-area"><block wx:if="{{formData.status=='99'||formData.status==''}}"><button class="mini-btn" type="info" size="mini" loading="{{loading1}}" data-event-opts="{{[['tap',[['submit',['0']]]]]}}" bindtap="__e">保存草稿</button></block><block wx:if="{{formData.status=='99'||formData.status==''}}"><button class="mini-btn" type="primary" loading="{{loading2}}" size="mini" data-event-opts="{{[['tap',[['submit',['1']]]]]}}" bindtap="__e">提交</button></block><block wx:if="{{formData.status=='3'}}"><button class="mini-btn" type="primary" size="mini" data-event-opts="{{[['tap',[['submit',['2']]]]]}}" bindtap="__e">提交</button></block><block wx:if="{{formData.status!=''&&formData.status!='2'&&formData.status!='16'&&formData.status!='99'}}"><button class="mini-btn cui-btn-2" type="info" loading="{{loading3}}" size="mini" data-event-opts="{{[['tap',[['urge']]]]}}" bindtap="__e">催办</button></block><block wx:if="{{formData.status!='99'&&formData.status!=''}}"><button class="mini-btn cui-btn-1" type="info" size="mini" data-event-opts="{{[['tap',[['send']]]]}}" bindtap="__e">抄送</button></block></view></form><uni-popup vue-id="1daa5a51-7" show="{{showdetail}}" type="{{type}}" mask-click="{{false}}" data-event-opts="{{[['^change',[['change']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="uni-tip"><text class="uni-tip-title">明细记录</text><scroll-view class="uni-tip-content uni-tip-content-detail" scroll-y><form><view class="uni-form-item uni-row"><view class="title">付款事由</view><input class="uni-input" placeholder="付款事由" data-event-opts="{{[['input',[['__set_model',['$0','paymentReason','$event',[]],['details']]]]]}}" value="{{details.paymentReason}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">付款金额</view><input class="uni-input" placeholder="付款金额" data-event-opts="{{[['input',[['__set_model',['$0','money','$event',[]],['details']]]]]}}" value="{{details.money}}" bindinput="__e"/></view><block wx:if="{{!formData.projectId}}"><view class="uni-form-item uni-row"><view class="title">付款类型</view><picker class="picker" value="{{index4}}" range="{{payType1}}" range-key="dictLabel" data-event-opts="{{[['change',[['payType1Func',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(payType1[index4]?payType1[index4]:{}).dictLabel}}</view></picker></view></block><block wx:if="{{formData.projectId}}"><view class="uni-form-item uni-row"><view class="title">工程大类</view><picker class="picker" value="{{index8}}" range="{{proCategory}}" range-key="dictLabel" data-event-opts="{{[['change',[['proCategoryFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(proCategory[index8]?proCategory[index8]:{}).dictLabel}}</view></picker></view></block><block wx:if="{{formData.projectId}}"><view class="uni-form-item uni-row"><view class="title">工程小类</view><picker class="picker" value="{{index9}}" range="{{detailCategory}}" range-key="dictLabel" data-event-opts="{{[['change',[['detailCategoryFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(detailCategory[index9]?detailCategory[index9]:{}).dictLabel}}</view></picker></view></block><view class="uni-form-item uni-row"><view class="title">收款人</view><input class="uni-input" placeholder="收款人账号" data-event-opts="{{[['input',[['__set_model',['$0','payee','$event',[]],['details']],['getPayeeList',['$event']]]]]}}" value="{{details.payee}}" bindinput="__e"/></view><block wx:if="{{payeeList.length>0}}"><scroll-view style="height:180rpx;text-align:center;background-color:#F7F7F7;" scroll-y><block wx:for="{{payeeList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['choicePayee',[index]]]]]}}" class="payee-item" bindtap="__e">{{''+item.payee+''}}</view></block></scroll-view></block><view class="uni-form-item uni-row"><view class="title">收款人账号</view><input class="uni-input" placeholder="收款人开户行" data-event-opts="{{[['input',[['__set_model',['$0','payeeAccount','$event',[]],['details']]]]]}}" value="{{details.payeeAccount}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">收款人开户行</view><input class="uni-input" placeholder="收款人账号" data-event-opts="{{[['input',[['__set_model',['$0','payeeOpenBank','$event',[]],['details']]]]]}}" value="{{details.payeeOpenBank}}" bindinput="__e"/></view><view class="uni-form-item uni-row"><view class="title">关联发票</view><picker class="picker" value="{{index5}}" range="{{relationBillType}}" range-key="dictLabel" data-event-opts="{{[['change',[['relationBillTypeFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(relationBillType[index5]?relationBillType[index5]:{}).dictLabel}}</view></picker></view><block wx:if="{{details.relationBillType=='0'}}"><view class="uni-form-item uni-row"><view class="title">欠票金额</view><input class="uni-input" placeholder="欠票金额" data-event-opts="{{[['input',[['__set_model',['$0','oweBillMoney','$event',[]],['details']]]]]}}" value="{{details.oweBillMoney}}" bindinput="__e"/></view></block><block wx:if="{{details.relationBillType=='0'}}"><view class="uni-form-item uni-row"><view class="title">收票截止日期</view><e-picker class="uni-input" vue-id="{{('1daa5a51-8')+','+('1daa5a51-7')}}" mode="date" showValue="{{details.billExpirationDate}}" data-event-opts="{{[['^change',[['changeEnd1']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}">{{details.billExpirationDate}}</e-picker></view></block><block wx:if="{{details.relationBillType=='2'}}"><view class="uni-form-item uni-row"><view class="title">发票</view><input data-event-opts="{{[['tap',[['togglePopup',['center','popup','3']]]],['input',[['__set_model',['$0','relationBillName','$event',[]],['details']]]]]}}" class="uni-input" value="{{details.relationBillName}}" bindtap="__e" bindinput="__e"/></view></block><view class="uni-form-item uni-row"><view class="title">关联合同</view><picker class="picker" value="{{index6}}" range="{{relationContractType}}" range-key="dictLabel" data-event-opts="{{[['change',[['relationContractTypeFunc',['$event']]]]]}}" bindchange="__e"><view class="uni-input">{{(relationContractType[index6]?relationContractType[index6]:{}).dictLabel}}</view></picker></view><block wx:if="{{details.relationContractType=='0'}}"><view class="uni-form-item uni-row"><view class="title">欠合同金额</view><input class="uni-input" placeholder="欠合同金额" data-event-opts="{{[['input',[['__set_model',['$0','oweContractMoney','$event',[]],['details']]]]]}}" value="{{details.oweContractMoney}}" bindinput="__e"/></view></block><block wx:if="{{details.relationContractType=='0'}}"><view class="uni-form-item uni-row"><view class="title">补合同截止日期</view><e-picker class="uni-input" vue-id="{{('1daa5a51-9')+','+('1daa5a51-7')}}" mode="date" showValue="{{details.contractExpirationDate}}" data-event-opts="{{[['^change',[['changeEnd1']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}">{{details.billExpirationDate}}</e-picker></view></block><block wx:if="{{details.relationContractType=='2'}}"><view class="uni-form-item uni-row"><view class="title">合同</view><input data-event-opts="{{[['tap',[['togglePopup',['center','popup','4']]]],['input',[['__set_model',['$0','relationContractName','$event',[]],['details']]]]]}}" class="uni-input" value="{{details.relationContractName}}" bindtap="__e" bindinput="__e"/></view></block></form></scroll-view><view class="uni-tip-group-button"><text data-event-opts="{{[['tap',[['cancel',['detail']]]]]}}" class="uni-tip-button" bindtap="__e">取消</text><text data-event-opts="{{[['tap',[['cancel',['detail','1']]]]]}}" class="uni-tip-button" bindtap="__e">确定</text></view></view></uni-popup><uni-popup vue-id="1daa5a51-10" show="{{showpopup}}" type="{{type}}" mask-click="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><uni-relation-popup vue-id="{{('1daa5a51-11')+','+('1daa5a51-10')}}" setPopup="{{popupData}}" data-event-opts="{{[['^getData',[['getData']]],['^popupState',[['popupState']]]]}}" bind:getData="__e" bind:popupState="__e" bind:__l="__l"></uni-relation-popup></uni-popup></view>