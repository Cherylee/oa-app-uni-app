(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/main"],{"37a8":function(t,e,n){"use strict";n.r(e);var a=n("5486"),i=n("3f7a");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("877f");var r,o=n("f0c5"),u=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=u.exports},"3f7a":function(t,e,n){"use strict";n.r(e);var a=n("f545"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},5486:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}));var a={uniDrawer:function(){return n.e("components/uni-drawer/uni-drawer").then(n.bind(null,"2050"))},uniList:function(){return n.e("components/uni-list/uni-list").then(n.bind(null,"a6d2"))},uniListItem:function(){return n.e("components/uni-list-item/uni-list-item").then(n.bind(null,"1b03"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.newsList,(function(e,n){var a=t.__get_orig(e),i=t.__map(e.data,(function(e,a){var i=t.__get_orig(e),s=0!=n&&3!=n?t.getDictV(t.dictProType,e.type):null;return{$orig:i,m0:s}}));return{$orig:a,l0:i}})));t.$mp.data=Object.assign({},{$root:{l1:n}})},s=[]},"5ebe":function(t,e,n){"use strict";(function(t){n("8485");a(n("66fd"));var e=a(n("37a8"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"78ba":function(t,e,n){},"877f":function(t,e,n){"use strict";var a=n("78ba"),i=n.n(a);i.a},f545:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("2f62");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function(){n.e("components/uni-drawer/uni-drawer").then(function(){return resolve(n("2050"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/uni-list/uni-list").then(function(){return resolve(n("a6d2"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/uni-list-item/uni-list-item").then(function(){return resolve(n("1b03"))}.bind(null,n)).catch(n.oe)},l=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(function(){return resolve(n("1581"))}.bind(null,n)).catch(n.oe)},d=100,h=3,f={components:{uniIcons:l,uniDrawer:o,uniList:u,uniListItem:c},data:function(){return{user:{},newsList:[],cacheTab:[],tabIndex:0,tabBars:[{name:"催办",id:"c001",url:"/system/sysUrge/phoneList",detailUrl:"./detail/sysUrge",pageNum:1,num:0},{name:"我审批过",id:"c002",url:"/oa/task/phoneList",detailUrl:"./detail/task",pageNum:1,num:0},{name:"待办任务",id:"c003",url:"/oa/task/phoneLastTaskList",detailUrl:"./detail/lastTask",pageNum:1,num:0},{name:"抄送我",id:"c004",url:"/system/sysCopy/phoneList",detailUrl:"./detail/sysCopy",pageNum:1,num:0}],scrollInto:"",showTips:!1,navigateFlag:!1,pulling:!1,refreshIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5QTFRFcHBw3Nzct7e39vb2ycnJioqK7e3tpqam29vb////D8oK7wAAAAp0Uk5T////////////ALLMLM8AAABxSURBVHja7JVBDoAgDASrjqj//7CJBi90iyYeOHTPMwmFZrHjYyyFYYUy1bwUZqtJIYVxhf1a6u0R7iUvWsCcrEtwJHp8MwMdvh2amHduiZD3rpWId9+BgPd7Cc2LIkPyqvlQvKxKBJ//Qwq/CacAAwDUv0a0YuKhzgAAAABJRU5ErkJggg==",showRight:!1,showLeft:!1,dictProType:[],copyNum:0,lastTaskNum:0,urgeNum:0,taskNum:0,swiperHeight:[100,100,100,100]}},computed:(0,a.mapState)(["name","deptName","company","hasLogin"]),onReady:function(){var t=this;setTimeout((function(){t.tabBars.forEach((function(e){t.newsList.push({data:[],isLoading:!1,refreshText:"",loadingText:"加载更多...",noneText:"加载中.....",total:0,pageSize:10})})),t.getList(0)}),350);var e=this;this.dictValue("oa_examine_type").then((function(t){e.dictProType=t})),this.urlRequestPost("oa/task/getUndelDataNum","",null,(function(t){if("0"==t.data.code)for(var n in e.tabBars)switch(e.tabBars[n].id){case"c001":e.tabBars[n].num=t.data.data.urgeNum;break;case"c002":e.tabBars[n].num=t.data.data.taskNum;break;case"c003":e.tabBars[n].num=t.data.data.lastTaskNum;break;case"c004":e.tabBars[n].num=t.data.data.copyNum;break}}))},methods:s(s({},(0,a.mapMutations)(["logout"])),{},{getList:function(t){this.serverList(this.tabBars[t].url,t)},serverList:function(t,e){var n=this.newsList[e],a=this;this.urlRequestPost(t,{pageSize:this.newsList[e].pageSize,pageNum:this.tabBars[e].pageNum,orderBy:"create_time desc"},null,(function(t){if(t.data.rows&&0!=t.data.rows.length){a.newsList[a.tabIndex].noneText="加载中.....";for(var i=[],s=0;s<t.data.rows.length;s++){var r=t.data.rows[s];r.idx=a.newGuid(),i.push(r)}a.tabBars[e].pageNum<=1?n.data=i:n.data=n.data.concat(i),t.data.total<10?a.swiperHeight[a.tabIndex]=150*parseInt(t.data.total):10==t.data.total?(a.swiperHeight[a.tabIndex]=1600,a.newsList[a.tabIndex].loadingText="没有数据了"):a.swiperHeight[a.tabIndex]=150*a.newsList[e].pageSize,a.newsList[e].total=t.data.total}else a.newsList[a.tabIndex].noneText="暂无数据"}))},goDetail:function(e){var n=this,a=this;this.navigateFlag||(this.navigateFlag=!0,"0"==a.tabIndex?t.navigateTo({url:"../main/details/details?id="+e.id+"&&index="+a.tabIndex}):"1"==a.tabIndex||"2"==a.tabIndex?t.navigateTo({url:"../main/details/details?type="+e.type+"&&id="+e.id+"&&taskId="+e.taskId+"&&index="+a.tabIndex}):t.navigateTo({url:"../main/details/details?id="+e.id+"&&index="+a.tabIndex}),setTimeout((function(){n.navigateFlag=!1}),200))},close:function(e,n){var a=this;t.showModal({content:"是否删除本条信息？",success:function(t){t.confirm&&a.newsList[e].data.splice(n,1)}})},loadMore:function(t){var e=this;setTimeout((function(){var t=Math.ceil(e.newsList[e.tabIndex].total/e.newsList[e.tabIndex].pageSize);e.tabBars[e.tabIndex].pageNum<t?(e.tabBars[e.tabIndex].pageNum++,e.getList(e.tabIndex)):e.newsList[e.tabIndex].loadingText="没有数据了！"}),500)},ontabtap:function(t){var e=t.target.dataset.current||t.currentTarget.dataset.current;this.switchTab(e)},ontabchange:function(t){var e=t.target.current||t.detail.current;this.switchTab(e)},switchTab:function(t){if(0===this.newsList[t].data.length&&this.getList(t),this.tabIndex!==t){if(this.newsList[this.tabIndex].data.length>d){var e=this.cacheTab.indexOf(this.tabIndex);e<0&&this.cacheTab.push(this.tabIndex)}if(this.tabIndex=t,this.scrollInto=this.tabBars[t].id,this.cacheTab.length>h){var n=this.cacheTab[0];this.clearTabData(n),this.cacheTab.splice(0,1)}}},clearTabData:function(t){this.newsList[t].data.length=0,this.newsList[t].loadingText="加载更多..."},refreshData:function(){},onrefresh:function(t){var e=this,n=this.newsList[this.tabIndex];n.refreshFlag&&(n.refreshing=!0,n.refreshText="正在刷新...",setTimeout((function(){e.refreshData(),e.pulling=!0,n.refreshing=!1,n.refreshFlag=!1,n.refreshText="已刷新",setTimeout((function(){e.pulling=!1}),500)}),2e3))},onpullingdown:function(t){var e=this.newsList[this.tabIndex];e.refreshing||this.pulling||(Math.abs(t.pullingDistance)>Math.abs(t.viewHeight)?(e.refreshFlag=!0,e.refreshText="释放立即刷新"):(e.refreshFlag=!1,e.refreshText="下拉可以刷新"))},newGuid:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+t()+"-"+t()+t()+t()).toUpperCase()},setStyle:function(t,e,n){var a=getCurrentPages();a[a.length-1]},show:function(t){"left"===t?this.showLeft=!0:this.showRight=!0},hide:function(){console.log("hide"),this.showLeft=!1,this.showRight=!1},closeDrawer:function(t){"left"===t?this.showLeft=!1:this.showRight=!1},confirm:function(){},logOut:function(){this.logout(),t.showLoading({title:"加载中"}),this.urlRequestPost("/logout","",null,(function(e){t.hideLoading(),t.reLaunch({url:"../login/login"})}))},goDetailPage:function(e){var n=this;this.navigateFlag||(this.navigateFlag=!0,"string"===typeof e?t.navigateTo({url:e}):t.navigateTo({url:e.url}),setTimeout((function(){n.navigateFlag=!1}),200))},getDictV:function(t,e){var n="";for(var a in t.data)t.data[a].dictValue==e&&(n=t.data[a].dictLabel);return n}}),onNavigationBarButtonTap:function(t){0===t.index&&(this.showRight=!this.showRight,this.show("right")),this.setStyle(t.index,!1)},onBackPress:function(){if(this.showRight||this.showLeft)return this.hide(),!0}};e.default=f}).call(this,n("543d")["default"])}},[["5ebe","common/runtime","common/vendor"]]]);