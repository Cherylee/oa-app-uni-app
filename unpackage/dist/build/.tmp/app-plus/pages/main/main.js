(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/main"],{"025f":function(t,e,n){"use strict";(function(t){n("161f"),n("921b");i(n("66fd"));var e=i(n("dd8f"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"1b53":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"3bca":function(t,e,n){"use strict";n.r(e);var i=n("9232"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},"6d08":function(t,e,n){"use strict";var i=n("df6a"),a=n.n(i);a.a},9232:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("289b")),s=n("2f62");function o(t){return t&&t.__esModule?t:{default:t}}var r=function(){return n.e("pages/main/news-item").then(n.bind(null,"cf5f"))},u=function(){return n.e("components/uni-drawer/uni-drawer").then(n.bind(null,"e71f"))},l=function(){return n.e("components/uni-list/uni-list").then(n.bind(null,"2737"))},c=function(){return n.e("components/uni-list-item/uni-list-item").then(n.bind(null,"29d2"))},h=function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,"6989"))},d=100,f=3,g={components:{mediaItem:r,uniIcons:h,uniDrawer:u,uniList:l,uniListItem:c},data:function(){return{user:{},newsList:[],cacheTab:[],tabIndex:0,tabBars:[{name:"催办",id:"c001",url:"/system/sysUrge/phoneList ",detailUrl:"./detail/sysUrge",pageNum:1},{name:"待审批",id:"c002",url:"/oa/task/phoneList",detailUrl:"./detail/task",pageNum:1},{name:"任务",id:"c003",url:"/oa/task/phoneLastTaskList",detailUrl:"./detail/lastTask",pageNum:1},{name:"抄送我的",id:"c004",url:"/system/sysCopy/phoneList",detailUrl:"./detail/sysCopy",pageNum:1}],scrollInto:"",showTips:!1,navigateFlag:!1,pulling:!1,refreshIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5QTFRFcHBw3Nzct7e39vb2ycnJioqK7e3tpqam29vb////D8oK7wAAAAp0Uk5T////////////ALLMLM8AAABxSURBVHja7JVBDoAgDASrjqj//7CJBi90iyYeOHTPMwmFZrHjYyyFYYUy1bwUZqtJIYVxhf1a6u0R7iUvWsCcrEtwJHp8MwMdvh2amHduiZD3rpWId9+BgPd7Cc2LIkPyqvlQvKxKBJ//Qwq/CacAAwDUv0a0YuKhzgAAAABJRU5ErkJggg==",showRight:!1,showLeft:!1,dictProType:[]}},onLoad:function(){},computed:(0,s.mapState)(["forcedLogin","hasLogin","userName"]),onReady:function(){var e=this;setTimeout(function(){e.tabBars.forEach(function(t){e.newsList.push({data:[],isLoading:!1,refreshText:"",loadingText:"加载更多...",noneText:"加载中.....",total:0,pageSize:10})}),e.getList(0)},350);var n=this;1==this.hasLogin?a.default.urlRequestPost("/phoneIndexData","",null,function(e){(e.statusCode="200")?n.user=e.data.user:t.reLaunch({url:"../login/login"})}):t.reLaunch({url:"../login/login"}),a.default.dictValue("oa_examine_type").then(function(t){n.dictProType=t})},methods:{getList:function(t){this.serverList(this.tabBars[t].url,t)},serverList:function(t,e){var n=this.newsList[e],i=this;a.default.urlRequestPost(t,{pageSize:this.newsList[e].pageSize,pageNum:this.tabBars[e].pageNum},null,function(t){if(0!=t.data.rows.length){i.newsList[i.tabIndex].noneText="加载中.....";for(var a=[],s=0;s<t.data.rows.length;s++){var o=t.data.rows[s];"1"==e&&(o.typeV=i.getDictV(i.dictProType,t.data.rows[s].type)),o.idx=i.newGuid(),a.push(o)}i.tabBars[e].pageNum<=1?n.data=a:n.data=n.data.concat(a),i.newsList[e].total=t.data.total}else i.newsList[i.tabIndex].noneText="暂无数据"})},goDetail:function(e){var n=this,i=this;this.navigateFlag||(this.navigateFlag=!0,(res.statusCode="200")&&t.navigateTo({url:"../main/details/details?type="+e.type+"&&id="+e.id+"&&taskId="+e.taskId+"&&index="+i.tabIndex}),setTimeout(function(){n.navigateFlag=!1},200))},close:function(e,n){var i=this;t.showModal({content:"是否删除本条信息？",success:function(t){t.confirm&&i.newsList[e].data.splice(n,1)}})},loadMore:function(t){var e=this;setTimeout(function(){var t=Math.ceil(e.newsList[e.tabIndex].total/e.newsList[e.tabIndex].pageSize);e.tabBars[e.tabIndex].pageNum<t?(console.log(i(t," at pages\\main\\main.vue:271")),e.tabBars[e.tabIndex].pageNum++,e.getList(e.tabIndex)):e.newsList[e.tabIndex].loadingText="没有数据了！"},500)},ontabtap:function(t){var e=t.target.dataset.current||t.currentTarget.dataset.current;this.switchTab(e)},ontabchange:function(t){var e=t.target.current||t.detail.current;this.switchTab(e)},switchTab:function(t){if(0===this.newsList[t].data.length&&this.getList(t),this.tabIndex!==t){if(this.newsList[this.tabIndex].data.length>d){var e=this.cacheTab.indexOf(this.tabIndex);e<0&&(this.cacheTab.push(this.tabIndex),console.log(i("cache index:: "+this.tabIndex," at pages\\main\\main.vue:302")))}if(this.tabIndex=t,this.scrollInto=this.tabBars[t].id,this.cacheTab.length>f){var n=this.cacheTab[0];this.clearTabData(n),this.cacheTab.splice(0,1),console.log(i("remove cache index:: "+n," at pages\\main\\main.vue:314"))}}},clearTabData:function(t){this.newsList[t].data.length=0,this.newsList[t].loadingText="加载更多..."},refreshData:function(){},onrefresh:function(t){var e=this,n=this.newsList[this.tabIndex];n.refreshFlag&&(n.refreshing=!0,n.refreshText="正在刷新...",setTimeout(function(){e.refreshData(),e.pulling=!0,n.refreshing=!1,n.refreshFlag=!1,n.refreshText="已刷新",setTimeout(function(){e.pulling=!1},500)},2e3))},onpullingdown:function(t){var e=this.newsList[this.tabIndex];e.refreshing||this.pulling||(Math.abs(t.pullingDistance)>Math.abs(t.viewHeight)?(e.refreshFlag=!0,e.refreshText="释放立即刷新"):(e.refreshFlag=!1,e.refreshText="下拉可以刷新"))},newGuid:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(t()+t()+"-"+t()+"-4"+t().substr(0,3)+"-"+t()+"-"+t()+t()+t()).toUpperCase()},setStyle:function(t,e,n){var i=getCurrentPages(),a=i[i.length-1],s=a.$getAppWebview();e?0===t?s.showTitleNViewButtonRedDot({index:t,text:n}):s.setTitleNViewButtonBadge({index:t,text:n}):0===t?s.hideTitleNViewButtonRedDot({index:t}):s.removeTitleNViewButtonBadge({index:t})},show:function(t){console.log(i("show",t," at pages\\main\\main.vue:389")),"left"===t?this.showLeft=!0:this.showRight=!0},hide:function(){console.log(i("hide"," at pages\\main\\main.vue:397")),this.showLeft=!1,this.showRight=!1},closeDrawer:function(t){"left"===t?this.showLeft=!1:this.showRight=!1},confirm:function(){},logOut:function(){a.default.urlRequestPost("/logout","",null,function(e){t.reLaunch({url:"../login/login"})})},goDetailPage:function(e){var n=this;this.navigateFlag||(this.navigateFlag=!0,"string"===typeof e?t.navigateTo({url:e}):t.navigateTo({url:e.url}),setTimeout(function(){n.navigateFlag=!1},200))},getDictV:function(t,e){var n="";for(var i in t.data)t.data[i].dictValue==e&&(n=t.data[i].dictLabel);return n}},onNavigationBarButtonTap:function(t){0===t.index&&(this.showRight=!this.showRight,this.show("right")),this.setStyle(t.index,!1)},onBackPress:function(){if(this.showRight||this.showLeft)return this.hide(),!0}};e.default=g}).call(this,n("6e42")["default"],n("0de9")["default"])},dd8f:function(t,e,n){"use strict";n.r(e);var i=n("1b53"),a=n("3bca");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("6d08");var o=n("2877"),r=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},df6a:function(t,e,n){}},[["025f","common/runtime","common/vendor"]]]);