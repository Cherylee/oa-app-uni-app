(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/oa/travel/travel"],{"1b6c":function(t,e,a){"use strict";a.r(e);var n=a("34fc"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},"34fc":function(t,a,n){"use strict";(function(t,i){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=u(n("289b")),r=u(n("85d7"));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){return Promise.all([n.e("common/vendor"),n.e("components/e-picker/e-picker")]).then(n.bind(null,"bd40"))},s={components:{ePicker:l},data:function(){return{edit:"0",formData:{},url:"",user:{},yes_no:[{name:"是",value:"0"},{name:"否",value:"1"}],oa_travel_tool:[],index1:0,index2:0,index3:0,date:o.default.getDate("dateTime"),dateStart:o.default.getDate("dateTime"),dateEnd:o.default.getDate("dateTime"),timeLimit:"",company:[],multiArray:[["百川"],[],[]],multiArrayId:[["100"],[],[]],multiIndex:[0,0,0]}},onLoad:function(t){this.edit=t.edit||"";var e=this;o.default.urlRequestPost("/phoneIndexData","",null,function(t){(t.statusCode="200")&&(e.user=t.data.user)}),o.default.dictValue("oa_travel_tool").then(function(t){e.oa_travel_tool=t.data})},onReady:function(){var t=this;o.default.urlRequestGet("system/dept/list?parentId=100","text/html;charset=UTF-8",function(e){if(e.statusCode="200"){t.company=e.data;var a=[],n=[],i=0;for(var o in t.company)t.company[o].deptId==t.user.companyId&&(i=o),a.push(t.company[o].deptName),n.push(t.company[o].deptId);t.multiArray[1]=a,t.multiArrayId[1]=n,t.showDeptDetail(i)}})},methods:{formSubmit:function(t){},submit:function(e){this.url="1"==e?"oa/oatravel/add":"oa/oatravel/saveDraft",console.log(t(this.url," at pages\\oa\\travel\\travel.vue:167"));var a=[{name:"applyTimeFrom",checkType:"notnull",checkRule:"",errorMsg:"开始时间必填"},{name:"applyTimeTo",checkType:"notnull",checkRule:"",errorMsg:"结束时间必填"},{name:"applyDays",checkType:"notnull",checkRule:"",errorMsg:"时长必填"},{name:"applyReason",checkType:"notnull",checkRule:"",errorMsg:"出差事由必填"},{name:"travelDestination",checkType:"notnull",checkRule:"",errorMsg:"出差目的地必填"}],n=r.default.check(this.formData,a);n?o.default.urlRequestPost(this.url,this.formData,"application/json;charset=UTF-8",function(t){i.showToast({title:t.data.msg,icon:"none"}),"0"==t.data.code&&i.reLaunch({url:"../../start/start"})}):i.showToast({title:r.default.error,icon:"none"})},formReset:function(e){console.log(t("清空数据"," at pages\\oa\\travel\\travel.vue:192"))},isCompanyTicket:function(t){this.index1=t.target.value,this.formData.isCompanyTicket=t.target.value},isBorrowMoney:function(){this.index2=e.target.value,this.formData.isBorrowMoney=e.target.value},vehicle:function(){this.index3=e.target.value,this.formData.vehicle=e.target.value},changeStart:function(t){this.showValue=t,this.dateStart=t,this.getTimeLimit(this.dateStart,this.dateEnd)},changeEnd:function(t){this.showValue=t,this.dateEnd=t,this.getTimeLimit(this.dateStart,this.dateEnd)},getTimeLimit:function(e,a){this.formData.applyTimeFrom=e,this.formData.applyTimeTo=a;var n=this,r={};r.startTime=e,r.endTime=a,o.default.urlRequestPost("oa/oatravel/calculateDays",JSON.stringify(r),"application/json;charset=UTF-8",function(e){console.log(t(e," at pages\\oa\\travel\\travel.vue:225")),"200"!=e.data.retCode?(n.formData.applyDays="",i.showToast({title:e.data.msg,icon:"none"})):n.formData.applyDays=e.data.time})},bindMultiPickerColumnChange:function(t){this.multiIndex[t.detail.column]=t.detail.value,1==t.detail.column&&this.showDeptDetail(t.detail.value),this.$forceUpdate()},showDeptDetail:function(t){var e=this;o.default.urlRequestGet("system/dept/list?parentId="+this.company[t].deptId,"text/html;charset=UTF-8",function(a){if(a.statusCode="200"){var n=[],i=[];for(var o in a.data)n.push(a.data[o].deptName),i.push(a.data[o].deptId);e.multiArray[2]=n,e.multiArrayId[2]=i,e.multiArray.splice(0,0),e.multiArrayId.splice(0,0),e.user.companyId=e.multiArrayId[1][e.multiIndex[1]],e.user.deptId=e.multiArrayId[2][e.multiIndex[2]],e.multiIndex[1]=t}})}}};a.default=s}).call(this,n("0de9")["default"],n("6e42")["default"])},7721:function(t,e,a){"use strict";var n=a("e4e0"),i=a.n(n);i.a},"862f":function(t,e,a){"use strict";a.r(e);var n=a("fbf7"),i=a("1b6c");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("7721");var r=a("2877"),u=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=u.exports},"9f6e":function(t,e,a){"use strict";(function(t){a("161f"),a("921b");n(a("66fd"));var e=n(a("862f"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},e4e0:function(t,e,a){},fbf7:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})}},[["9f6e","common/runtime","common/vendor"]]]);