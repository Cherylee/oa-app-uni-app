(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/oa/outgoing/outgoing"],{"0295":function(t,e,a){"use strict";a.r(e);var n=a("5376"),o=a("f9d1");for(var u in o)"default"!==u&&function(t){a.d(e,t,function(){return o[t]})}(u);a("ac03");var i=a("2877"),r=Object(i["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},"1de7":function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(a("289b")),u=i(a("85d7"));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(){return Promise.all([a.e("common/vendor"),a.e("components/e-picker/e-picker")]).then(a.bind(null,"bd40"))},l={components:{ePicker:r},data:function(){return{user:{},formData:{},url:"oa/oaOutgoing/add",flag:!1,index:0,date:o.default.getDate("dateTime"),dateStart:o.default.getDate("dateTime"),dateEnd:o.default.getDate("dateTime"),timeLimit:"",company:[],multiArray:[["百川"],[],[]],multiArrayId:[["100"],[],[]],multiIndex:[0,0,0]}},onLoad:function(){var t=this;o.default.urlRequestPost("/phoneIndexData","",null,function(e){(e.statusCode="200")&&(t.user=e.data.user)})},onReady:function(){var t=this;o.default.urlRequestGet("system/dept/list?parentId=100","text/html;charset=UTF-8",function(e){if(e.statusCode="200"){t.company=e.data;var a=[],n=[],o=0;for(var u in t.company)t.company[u].deptId==t.user.companyId&&(o=u),a.push(t.company[u].deptName),n.push(t.company[u].deptId);t.multiArray[1]=a,t.multiArrayId[1]=n,t.showDeptDetail(o)}})},methods:{formSubmit:function(e){var a=e.detail.value,i={},r=this.url,l=[{name:"goOutStart",checkType:"notnull",checkRule:"",errorMsg:"开始时间必填"},{name:"goOutEnd",checkType:"notnull",checkRule:"",errorMsg:"结束时间必填"},{name:"goOutHour",checkType:"notnull",checkRule:"",errorMsg:"时长必填"},{name:"reason",checkType:"notnull",checkRule:"",errorMsg:"理由必填"}];i.oaOutgoing=a,i.attachmentList=[];var d=u.default.check(a,l);d?o.default.urlRequestPost(r,i,"application/json;charset=UTF-8",function(e){console.log(t(e," at pages\\oa\\outgoing\\outgoing.vue:137")),"0"==e.data.code?n.reLaunch({url:"../../start/start"}):n.showToast({title:e.data.msg,icon:"none"})}):n.showToast({title:u.default.error,icon:"none"})},save:function(){console.log(t("1"," at pages\\oa\\outgoing\\outgoing.vue:151"))},formReset:function(e){e.stopPropagation(),console.log(t(e," at pages\\oa\\outgoing\\outgoing.vue:155"))},bindPickerChange:function(e){console.log(t("picker发送选择改变，携带值为："+e.target.value," at pages\\oa\\outgoing\\outgoing.vue:158")),this.index=e.target.value},changeStart:function(t){this.showValue=t,this.dateStart=t,this.getTimeLimit(this.dateStart,this.dateEnd)},changeEnd:function(t){this.showValue=t,this.dateEnd=t,this.getTimeLimit(this.dateStart,this.dateEnd)},getTimeLimit:function(t,e){var a=this,n={};n.startTime=t,n.endTime=e,o.default.urlRequestPost("oa/oaOutgoing/calculateHours",JSON.stringify(n),"application/json;charset=UTF-8",function(t){a.timeLimit=t.data.time})},bindMultiPickerColumnChange:function(t){this.multiIndex[t.detail.column]=t.detail.value,1==t.detail.column&&this.showDeptDetail(t.detail.value),this.$forceUpdate()},showDeptDetail:function(e){var a=this;o.default.urlRequestGet("system/dept/list?parentId="+this.company[e].deptId,"text/html;charset=UTF-8",function(n){if(n.statusCode="200"){var o=[],u=[];for(var i in console.log(t(n.data," at pages\\oa\\outgoing\\outgoing.vue:195")),n.data)o.push(n.data[i].deptName),u.push(n.data[i].deptId);a.multiArray[2]=o,a.multiArrayId[2]=u,a.multiArray.splice(0,0),a.multiArrayId.splice(0,0),a.user.companyId=a.multiArrayId[1][a.multiIndex[1]],a.user.deptId=a.multiArrayId[2][a.multiIndex[2]],a.multiIndex[1]=e}})}}};e.default=l}).call(this,a("0de9")["default"],a("6e42")["default"])},5376:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o})},"585d":function(t,e,a){},ac03:function(t,e,a){"use strict";var n=a("585d"),o=a.n(n);o.a},c516:function(t,e,a){"use strict";(function(t){a("161f"),a("921b");n(a("66fd"));var e=n(a("0295"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},f9d1:function(t,e,a){"use strict";a.r(e);var n=a("1de7"),o=a.n(n);for(var u in n)"default"!==u&&function(t){a.d(e,t,function(){return n[t]})}(u);e["default"]=o.a}},[["c516","common/runtime","common/vendor"]]]);